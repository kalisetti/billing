(function(){"use strict";var e={3262:function(e,t,o){o(8052);var a=o(9242),r=o(3396);function s(e,t,o,a,s,n){const i=(0,r.up)("base-page");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{isUserLoggedIn:this.isUserLoggedIn},null,8,["isUserLoggedIn"])])}o(7658);var n=o(4161);function i(e,t,o,a,s,n){const i=(0,r.up)("page-header"),l=(0,r.up)("nav-bar"),c=(0,r.up)("router-view"),d=(0,r.up)("page-footer");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("header",null,[(0,r.Wm)(i),o.isUserLoggedIn?((0,r.wg)(),(0,r.j4)(l,{key:0})):(0,r.kq)("",!0)]),(0,r._)("main",null,[(0,r.Wm)(c,{id:"main"})]),(0,r._)("footer",null,[(0,r.Wm)(d)])])}const l=e=>((0,r.dD)("data-v-78d022b8"),e=e(),(0,r.Cn)(),e),c={class:"container-fluid p-5 page-header text-white text-center"},d=l((()=>(0,r._)("h1",null,"Billing System",-1))),m=l((()=>(0,r._)("p",null,"This is simple billing solution",-1))),u=[d,m];function p(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("div",c,u)}var h={name:"PageHeader"},g=o(89);const b=(0,g.Z)(h,[["render",p],["__scopeId","data-v-78d022b8"]]);var f=b;const v={class:"container-fluid p-5 bg-secondary text-white text-center"},_=(0,r._)("small",{class:"mt-3 mb-3"},[(0,r.Uk)("Developed and maintained by "),(0,r._)("a",{href:"https://github.com/kalisetti"},"kalisetti")],-1),w=[_];function D(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("div",v,w)}var k={name:"PageFooter"};const y=(0,g.Z)(k,[["render",D]]);var I=y;const R=e=>((0,r.dD)("data-v-4c153c0b"),e=e(),(0,r.Cn)(),e),C={class:"navbar-custom"},S={class:"navbar navbar-expand-lg navbar-light bg-light"},$=R((()=>(0,r._)("i",{class:"bi bi-house-fill"},null,-1))),U=R((()=>(0,r._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r._)("span",{class:"navbar-toggler-icon"})],-1))),N={class:"collapse navbar-collapse",id:"navbarNav"},P={class:"navbar-nav"},L={class:"nav-item"},Z={class:"nav-item dropdown"},E=R((()=>(0,r._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Subscription ",-1))),x={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},A=R((()=>(0,r._)("li",null,[(0,r._)("hr",{class:"dropdown-divider"})],-1))),W={class:"nav-item"},j={class:"nav-item"},q={class:"nav-item"},O={class:"nav-item"};function V(e,t,o,a,s,n){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",C,[(0,r._)("nav",S,[(0,r.Wm)(i,{class:"navbar-brand",to:"/desk"},{default:(0,r.w5)((()=>[$])),_:1}),U,(0,r._)("div",N,[(0,r._)("ul",P,[(0,r._)("li",L,[(0,r.Wm)(i,{class:"nav-link",to:"/desk/List/customers"},{default:(0,r.w5)((()=>[(0,r.Uk)("Customers")])),_:1})]),(0,r._)("li",Z,[E,(0,r._)("ul",x,[(0,r._)("li",null,[(0,r.Wm)(i,{class:"dropdown-item",to:"/desk/List/subscription-plan"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Subscription Plan ")])),_:1})]),(0,r._)("li",null,[(0,r.Wm)(i,{class:"dropdown-item",to:"/desk/List/subscription"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Subscription ")])),_:1})]),A,(0,r._)("li",null,[(0,r.Wm)(i,{class:"dropdown-item",to:"/desk/List/subscription-settings"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Settings ")])),_:1})])])]),(0,r._)("li",W,[(0,r.Wm)(i,{class:"nav-link",to:"/desk/List/invoices"},{default:(0,r.w5)((()=>[(0,r.Uk)("Invoices")])),_:1})]),(0,r._)("li",j,[(0,r.Wm)(i,{class:"nav-link",to:"/desk/List/payments"},{default:(0,r.w5)((()=>[(0,r.Uk)("Payments")])),_:1})]),(0,r._)("li",q,[(0,r.Wm)(i,{class:"nav-link",to:"/desk/List/settings"},{default:(0,r.w5)((()=>[(0,r.Uk)("Settings")])),_:1})]),(0,r._)("li",O,[(0,r.Wm)(i,{class:"nav-link",to:"/desk/List/users"},{default:(0,r.w5)((()=>[(0,r.Uk)("Users")])),_:1})])])])])])}var z={name:"NavBar"};const M=(0,g.Z)(z,[["render",V],["__scopeId","data-v-4c153c0b"]]);var B=M,F={name:"BasePage",components:{PageHeader:f,PageFooter:I,NavBar:B},props:["isUserLoggedIn"]};const T=(0,g.Z)(F,[["render",i],["__scopeId","data-v-28b2e594"]]);var H=T,Y={name:"App",components:{BasePage:H},data(){return{isUserLoggedIn:!1}},created(){console.log("App.vue: created step1..."),this.checkAuthentication(),console.log("App.vue: created step2...")},methods:{checkAuthentication(){console.log("App.vue: checkAuthentication"),n.Z.get("/api/checkAuth.php").then((e=>{e.data.loggedIn?(console.log("response.data.loggedIn",e.data.loggedIn),this.isUserLoggedIn=!0,"/login"===this.$route.path&&this.$router.push("/desk")):(this.isUserLoggedIn=!1,"/register"!==this.$route.path&&this.$router.push("/login"))})).catch((e=>{this.isUserLoggedIn=!1,console.log("Error checking authentication status:",e)}))},logout(){n.Z.get("/api/logout.php").then((()=>{this.$router.push("/login")})).catch((e=>{console.log("Error logging out: ",e)}))}},watch:{$route(e){console.log("App.vue: watch",e),this.checkAuthentication()}},provide(){return{logout:this.logout}}};const K=(0,g.Z)(Y,[["render",s]]);var G=K,J=o(2483);const Q={class:"container"},X=(0,r._)("h2",{class:"mt-5"},"Login",-1),ee={class:"form-group"},te=(0,r._)("label",{for:"email"},"Email:",-1),oe={class:"form-group"},ae=(0,r._)("label",{for:"password"},"Password:",-1),re=(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Login",-1),se=(0,r._)("p",null,"This is some message",-1),ne=(0,r._)("p",null,"And more details",-1);function ie(e,t,o,s,n,i){const l=(0,r.up)("base-button"),c=(0,r.up)("base-dialog"),d=(0,r.up)("base-card");return(0,r.wg)(),(0,r.j4)(d,null,{default:(0,r.w5)((()=>[(0,r._)("div",Q,[X,(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>i.login&&i.login(...e)),["prevent"])),class:"mt-4"},[(0,r._)("div",ee,[te,(0,r.wy)((0,r._)("input",{type:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),class:"form-control",required:""},null,512),[[a.nr,n.email]])]),(0,r._)("div",oe,[ae,(0,r.wy)((0,r._)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),class:"form-control",autocomplete:"off",required:""},null,512),[[a.nr,n.password]])]),re],32),n.msgprint?((0,r.wg)(),(0,r.j4)(c,{key:0,title:"Something",onClose:i.confirmError},{default:(0,r.w5)((()=>[se,ne])),actions:(0,r.w5)((()=>[(0,r.Wm)(l,{onClick:i.confirmError},{default:(0,r.w5)((()=>[(0,r.Uk)("Okay")])),_:1},8,["onClick"])])),_:1},8,["onClose"])):(0,r.kq)("",!0)])])),_:1})}var le={name:"LoginForm",data(){return{email:"",password:"",msgprint:!1}},methods:{login(){n.Z.post("/api/login.php",{email:this.email,password:this.password}).then((e=>{"Login successful"===e.data.message?(console.log(e.data.message),this.$router.push("/desk")):(console.log(e.data.error),console.log(e),this.msgprint=!0)})).catch((e=>{console.log("ERRRR: ",e),this.msgprint=!0}))},confirmError(){this.msgprint=!1}}};const ce=(0,g.Z)(le,[["render",ie]]);var de=ce;const me={class:"container"},ue=(0,r._)("h2",{class:"mt-5"},"Register",-1),pe={class:"form-group"},he=(0,r._)("label",{for:"username"},"Name:",-1),ge={class:"form-group"},be=(0,r._)("label",{for:"email"},"Email:",-1),fe={class:"form-group"},ve=(0,r._)("label",{for:"password"},"Password:",-1),_e=(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Register",-1);function we(e,t,o,s,n,i){return(0,r.wg)(),(0,r.iD)("div",me,[ue,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>i.register&&i.register(...e)),["prevent"])),class:"mt-4"},[(0,r._)("div",pe,[he,(0,r.wy)((0,r._)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),class:"form-control",required:""},null,512),[[a.nr,n.username]])]),(0,r._)("div",ge,[be,(0,r.wy)((0,r._)("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),class:"form-control",required:""},null,512),[[a.nr,n.email]])]),(0,r._)("div",fe,[ve,(0,r.wy)((0,r._)("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),class:"form-control",autocomplete:"off",required:""},null,512),[[a.nr,n.password]])]),_e],32)])}var De={name:"RegistrationForm",data(){return{username:"",email:"",password:""}},methods:{register(){n.Z.post("/api/register.php",{username:this.username,email:this.email,password:this.password}).then((e=>{"User registered successfully"===e.data.message?console.log(e.data.message):(console.log(e.data.error),console.log(e))})).catch((e=>{console.log("ERRRRR:",e)}))}}};const ke=(0,g.Z)(De,[["render",we]]);var ye=ke;function Ie(e,t,o,a,s,n){const i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(i,{id:"desk-view"})])}var Re={name:"DeskView"};const Ce=(0,g.Z)(Re,[["render",Ie],["__scopeId","data-v-799d9d9f"]]);var Se=Ce;function $e(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("div")}var Ue={beforeMount(){console.log("LogoutPage","beforeMount",this),this.logout()},inject:["logout"]};const Ne=(0,g.Z)(Ue,[["render",$e]]);var Pe=Ne;var Le=o(7139);const Ze=e=>((0,r.dD)("data-v-3e0be01e"),e=e(),(0,r.Cn)(),e),Ee={id:"form-comments"},xe={class:"timeline"},Ae={class:"timeline-head"},We={class:"comment-input-wrapper"},je={class:"comment-input-header"},qe=Ze((()=>(0,r._)("span",{class:"small text-muted"},"Add a comment",-1))),Oe={class:"comment-input-container"},Ve={id:"timeline-items"};function ze(e,t,o,s,n,i){return(0,r.wg)(),(0,r.iD)("div",Ee,[(0,r._)("div",xe,[(0,r._)("div",Ae,[(0,r._)("div",We,[(0,r._)("div",je,[qe,(0,r._)("button",{class:"btn btn-small btn-outline-primary btn-comment pull-right",onClick:t[0]||(t[0]=(...e)=>i.postComment&&i.postComment(...e))}," Comment ")]),(0,r._)("div",Oe,[(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.commentInput=t),rows:"5",cols:"50"},null,512),[[a.nr,e.commentInput]])])])]),(0,r._)("div",Ve,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.comments,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.name,class:"comment"},(0,Le.zw)(e.text),1)))),128))])])])}var Me={name:"FormComments",inject:["comments","postComment"]};const Be=(0,g.Z)(Me,[["render",ze],["__scopeId","data-v-3e0be01e"]]);var Fe=Be;const Te=e=>((0,r.dD)("data-v-5607b628"),e=e(),(0,r.Cn)(),e),He={id:"list-view"},Ye={class:"d-flex justify-content-end"},Ke=(0,r.uE)('<div class="dropdown" data-v-5607b628><button class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" data-v-5607b628> Menu </button><ul class="dropdown-menu" data-v-5607b628><li data-v-5607b628><a class="dropdown-item" href="#" data-v-5607b628>Settings</a></li><li data-v-5607b628><a class="dropdown-item" href="#" data-v-5607b628>Share</a></li></ul></div>',1),Ge={key:0,class:"loading-overlay"},Je=Te((()=>(0,r._)("div",{class:"spinner-border",role:"status"},[(0,r._)("span",{class:"visually-hidden"},"Loading...")],-1))),Qe=[Je],Xe={class:"table-responsive"},et={class:"table table-striped"},tt=["onClick"],ot={class:"mt-3","aria-label":"Page navigation"},at={class:"d-flex justify-content-start"},rt={class:"pagination"},st=Te((()=>(0,r._)("span",{class:"page-link"},"5",-1))),nt=[st],it=Te((()=>(0,r._)("span",{class:"page-link"},"10",-1))),lt=[it],ct=Te((()=>(0,r._)("span",{class:"page-link"},"15",-1))),dt=[ct],mt={class:"pagination ms-auto"},ut=Te((()=>(0,r._)("span",{class:"page-link"},"More",-1))),pt=[ut];function ht(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("div",He,[(0,r._)("header",null,[(0,r._)("div",Ye,[Ke,(0,r._)("button",{class:"btn btn-primary ms-2",onClick:t[0]||(t[0]=(...e)=>n.refreshData&&n.refreshData(...e))},"Refresh"),(0,r._)("button",{class:"btn btn-primary ms-2",onClick:t[1]||(t[1]=(...e)=>n.createNewRecord&&n.createNewRecord(...e))},"New")])]),(0,r._)("main",null,[s.isLoading?((0,r.wg)(),(0,r.iD)("div",Ge,Qe)):(0,r.kq)("",!0),(0,r._)("div",Xe,[(0,r._)("table",et,[(0,r._)("caption",null,"List view results for table "+(0,Le.zw)(o.tableName),1),(0,r._)("thead",null,[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.columns,(e=>((0,r.wg)(),(0,r.iD)("th",{key:e},(0,Le.zw)(e),1)))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.rows,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.name,onClick:t=>n.editRecord(e)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.columns,(t=>((0,r.wg)(),(0,r.iD)("td",{key:t},(0,Le.zw)(e[t]),1)))),128))],8,tt)))),128))])])])]),(0,r._)("footer",null,[(0,r._)("nav",ot,[(0,r._)("div",at,[(0,r._)("ul",rt,[(0,r._)("li",{class:(0,Le.C_)(["page-item",{active:5===s.pageSize}]),onClick:t[2]||(t[2]=e=>n.changePageSize(5))},nt,2),(0,r._)("li",{class:(0,Le.C_)(["page-item",{active:10===s.pageSize}]),onClick:t[3]||(t[3]=e=>n.changePageSize(10))},lt,2),(0,r._)("li",{class:(0,Le.C_)(["page-item",{active:15===s.pageSize}]),onClick:t[4]||(t[4]=e=>n.changePageSize(15))},dt,2)]),(0,r._)("ul",mt,[(0,r._)("li",{class:"page-item",onClick:t[5]||(t[5]=(...e)=>n.loadMore&&n.loadMore(...e))},pt)])])])])])}var gt={name:"ListView",props:["tableName"],data(){return{columns:[],rows:[],pageSize:5,offset:0,isLoading:!1}},created(){console.log("ListView.created.tableName",this.tableName),this.fetchData()},methods:{fetchData(){this.isLoading=!0,console.log(`ListView.fetchDate: limit ${this.pageSize} offset ${this.offset}`),n.Z.get(`/api/fetchData.php?table=${this.tableName}&limit=${this.pageSize}&offset=${this.offset}`).then((e=>{this.columns=e.data.columns,this.rows.push.apply(this.rows,e.data.rows)})).catch((e=>{console.error("Error fetching data: ",e)})).finally((()=>{this.isLoading=!1}))},refreshData(){this.offset&&(this.pageSize+=this.offset,this.offset=0),this.fetchData()},createNewRecord(){const e=`new-${this.tableName}`;this.$router.push(`/desk/Edit/${this.tableName}/${e}`)},editRecord(e){const t=e.name;this.$router.push(`/desk/Edit/${this.tableName}/${t}`)},changePageSize(e){console.log("changePagesize: ",e),this.offset=0,this.pageSize=e,this.fetchData()},loadMore(){this.offset+=this.pageSize,this.fetchData()}},watch:{tableName(e){console.log("ListView.watch.newId: ",e),this.rows=[],this.columns=[],this.offset=0,this.fetchData()}}};const bt=(0,g.Z)(gt,[["render",ht],["__scopeId","data-v-5607b628"]]);var ft=bt;function vt(e,t){const o=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("h2",null,[(0,r.Uk)("Page not found! Maybe view our "),(0,r.Wm)(o,{to:"/teams"},{default:(0,r.w5)((()=>[(0,r.Uk)("Teams")])),_:1}),(0,r.Uk)("?")])}const _t={},wt=(0,g.Z)(_t,[["render",vt]]);var Dt=wt;const kt={id:"desk-page"},yt=(0,r._)("h1",null,"Default Desk Content from DeskPage.vue",-1),It=[yt];function Rt(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("div",kt,It)}var Ct={name:"DeskPage"};const St=(0,g.Z)(Ct,[["render",Rt]]);var $t=St;const Ut={class:"form-page"},Nt={id:"form-toolbar"},Pt={id:"form-indicators"},Lt={key:0},Zt={id:"form-actions"},Et={id:"form-body"},xt={id:"form-fields",class:"row"},At={class:"col"},Wt={class:"form-group"},jt=(0,r._)("label",{for:"plan-name"},"Plan Name",-1),qt={class:"col"},Ot={class:"form-group"},Vt=(0,r._)("label",{for:"billing-interval"},"Billing Interval",-1),zt=(0,r._)("option",{selected:""},"Month",-1),Mt=(0,r._)("option",null,"Year",-1),Bt=[zt,Mt],Ft={class:"form-group"},Tt=(0,r._)("label",{for:"cost"},"Cost",-1);function Ht(e,t,o,s,n,i){const l=(0,r.up)("form-comments");return(0,r.wg)(),(0,r.iD)("div",Ut,[(0,r._)("div",Nt,[(0,r._)("div",Pt,[i.isNewRecord||i.hasUnsavedChanges?((0,r.wg)(),(0,r.iD)("div",Lt,"Not Saved")):(0,r.kq)("",!0)]),(0,r._)("div",Zt,[i.isNewRecord||i.hasUnsavedChanges?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.saveRecord&&i.saveRecord(...e))},"Save")):(0,r.kq)("",!0),i.isDraft&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>i.submitRecord&&i.submitRecord(...e))},"Submit")):(0,r.kq)("",!0),i.isSubmitted&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>i.cancelRecord&&i.cancelRecord(...e))},"Cancel")):(0,r.kq)("",!0),i.isCancelled&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:3,class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>i.deleteRecord&&i.deleteRecord(...e))},"Delete")):(0,r.kq)("",!0)])]),(0,r._)("div",Et,[(0,r._)("div",xt,[(0,r._)("div",At,[(0,r._)("div",Wt,[jt,(0,r.wy)((0,r._)("input",{type:"text",id:"plan-name",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.recordData["plan_name"]=e),required:""},null,512),[[a.nr,n.recordData["plan_name"]]])])]),(0,r._)("div",qt,[(0,r._)("div",Ot,[Vt,(0,r.wy)((0,r._)("select",{id:"billing-interval",class:"form-select","aria-label":"Billing Interval","onUpdate:modelValue":t[5]||(t[5]=e=>n.recordData["billing_interval"]=e)},Bt,512),[[a.bM,n.recordData["billing_interval"]]])]),(0,r._)("div",Ft,[Tt,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>n.recordData["cost"]=e),required:""},null,512),[[a.nr,n.recordData["cost"]]])])])])]),(0,r.Wm)(l)])}var Yt={name:"SubscriptionPlan",components:{"form-comments":Fe},data(){return{recordId:null,tableName:"subscription-plan",recordData:{docstatus:0},oldData:{},commentInput:"",comments:[],newRecord:!0,isSubmittable:!1}},computed:{tableColumns(){const e=["name","created_by","created_on","modified_by","modified_on","docstatus"],t=Object.keys(this.recordData);return t.filter((t=>!e.includes(t)))},isNewRecord(){return this.newRecord},hasUnsavedChanges(){const e=Object.keys(this.recordData),t=Object.keys(this.oldData);if(e.length!==t.length)return!0;for(let o of e){if(!t.includes(o))return!0;if(this.recordData[o]!==this.oldData[o])return!0}return!1},isDraft(){return 0===this.recordData.docstatus},isSubmitted(){return 1===this.recordData.docstatus},isCancelled(){return 2===this.recordData.docstatus}},created(){console.log("***SubscriptionPlan.created: ",this.recordData),this.recordId=this.$route.params.recordId,this.fetchRecordData()},methods:{fetchRecordData(){console.log("***SubscriptionPlan.methods.fetchRecordData"),n.Z.get(`/api/formAPI.php?table=${this.tableName}&recordId=${this.recordId}`).then((e=>{const t=e.data.rows?e.data.rows[0]:[];t&&(this.recordData=t,this.newRecord=!1,this.oldData={...this.recordData}),console.log(">>>this.recordData",this.recordData)})).catch((e=>{console.error("Error fetching record data: ",e)}))},fetchComments(){n.Z.get(`/api/formAPI.php?table=comments&recordId=${this.recordId}`).then((e=>{this.comments=e.data.rows,console.log("this.comments",this.recordData)})).catch((e=>{console.error("Error fetching comments: ",e)}))},saveRecord(){console.log("***SubscriptionPlan.methods.saveRecord: ",this.recordData),n.Z.post(`/api/formAPI.php?table=${this.tableName}&recordId=${this.recordId}`,this.recordData).then((()=>{this.fetchRecordData()})).catch((e=>{console.error("Error saving record: ",e)}))},submitRecord(){n.Z.post(`/api/submitRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.fetchRecordData()})).catch((e=>{console.error("Error submitting record: ",e)}))},cancelRecord(){n.Z.post(`/api/cancelRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.fetchRecordData()})).cancel((e=>{console.error("Error cancelling record: ",e)}))},deleteRecord(){n.Z.post(`/api/deleteRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.$router.push(`/desk/List/${this.tableName}`)})).catch((e=>{console.error("Error deleting record: ",e)}))},postComment(){const e={comment:this.commentInput,recordId:this.recordId,tableName:this.tableName};n.Z.post(`/api/formAPI.php?table=${this.tableName}`,e).then((()=>{this.commentInput="",this.fetchComments()})).catch((e=>{console.error("Error posting comment: ",e)}))}},provide(){return{postComment:this.postComment,comments:this.comments}},watch:{recordData(e){console.log("watch ===> recordData: ",e)}}};const Kt=(0,g.Z)(Yt,[["render",Ht]]);var Gt=Kt;const Jt={class:"form-page"},Qt={id:"form-toolbar"},Xt={id:"form-indicators"},eo={key:0},to={id:"form-actions"},oo={id:"form-body"},ao={id:"form-fields",class:"row"},ro={class:"col"},so={class:"form-group"},no=(0,r._)("label",{for:"customer-name"},"Customer Name",-1),io={class:"col"},lo={class:"form-group"},co=(0,r._)("label",{for:"email"},"Email ID",-1),mo={class:"form-group"},uo=(0,r._)("label",{for:"contact-no"},"Contact No",-1),po=(0,r._)("hr",null,null,-1),ho=(0,r._)("h5",null,"ADDRESS",-1),go={class:"row"},bo={class:"col"},fo={class:"form-group"},vo=(0,r._)("label",{for:"address1"},"Address Line 1",-1),_o={class:"form-group"},wo=(0,r._)("label",{for:"address2"},"Address Line 2",-1),Do={class:"form-group"},ko=(0,r._)("label",{for:"address3"},"Address Line 3",-1),yo=(0,r._)("div",{class:"col"},null,-1);function Io(e,t,o,s,n,i){const l=(0,r.up)("form-comments");return(0,r.wg)(),(0,r.iD)("div",Jt,[(0,r._)("div",Qt,[(0,r._)("div",Xt,[i.isNewRecord||i.hasUnsavedChanges?((0,r.wg)(),(0,r.iD)("div",eo,"Not Saved")):(0,r.kq)("",!0)]),(0,r._)("div",to,[i.isNewRecord||i.hasUnsavedChanges?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.saveRecord&&i.saveRecord(...e))},"Save")):(0,r.kq)("",!0),i.isDraft&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>i.submitRecord&&i.submitRecord(...e))},"Submit")):(0,r.kq)("",!0),i.isSubmitted&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>i.cancelRecord&&i.cancelRecord(...e))},"Cancel")):(0,r.kq)("",!0),i.isCancelled&&!i.hasUnsavedChanges&&n.isSubmittable?((0,r.wg)(),(0,r.iD)("button",{key:3,class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>i.deleteRecord&&i.deleteRecord(...e))},"Delete")):(0,r.kq)("",!0)])]),(0,r._)("div",oo,[(0,r._)("div",ao,[(0,r._)("div",ro,[(0,r._)("div",so,[no,(0,r.wy)((0,r._)("input",{type:"text",id:"customer-name",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.recordData["customer_name"]=e),required:""},null,512),[[a.nr,n.recordData["customer_name"]]])])]),(0,r._)("div",io,[(0,r._)("div",lo,[co,(0,r.wy)((0,r._)("input",{type:"email",id:"email",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.recordData["email"]=e)},null,512),[[a.nr,n.recordData["email"]]])]),(0,r._)("div",mo,[uo,(0,r.wy)((0,r._)("input",{type:"text",id:"contact-no",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>n.recordData["contact_no"]=e)},null,512),[[a.nr,n.recordData["contact_no"]]])])])]),po,ho,(0,r._)("div",go,[(0,r._)("div",bo,[(0,r._)("div",fo,[vo,(0,r.wy)((0,r._)("input",{type:"text",id:"address1",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>n.recordData["address1"]=e)},null,512),[[a.nr,n.recordData["address1"]]])]),(0,r._)("div",_o,[wo,(0,r.wy)((0,r._)("input",{type:"text",id:"address2",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>n.recordData["address2"]=e)},null,512),[[a.nr,n.recordData["address2"]]])]),(0,r._)("div",Do,[ko,(0,r.wy)((0,r._)("input",{type:"text",id:"address3",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>n.recordData["address3"]=e)},null,512),[[a.nr,n.recordData["address3"]]])])]),yo])]),(0,r.Wm)(l)])}var Ro={name:"CustomerForm",components:{"form-comments":Fe},data(){return{recordId:null,tableName:"customers",recordData:{docstatus:0},oldData:{},commentInput:"",comments:[],newRecord:!0,isSubmittable:!1}},computed:{tableColumns(){const e=["name","created_by","created_on","modified_by","modified_on","docstatus"],t=Object.keys(this.recordData);return t.filter((t=>!e.includes(t)))},isNewRecord(){return this.newRecord},hasUnsavedChanges(){const e=Object.keys(this.recordData),t=Object.keys(this.oldData);if(e.length!==t.length)return!0;for(let o of e){if(!t.includes(o))return!0;if(this.recordData[o]!==this.oldData[o])return!0}return!1},isDraft(){return 0===this.recordData.docstatus},isSubmitted(){return 1===this.recordData.docstatus},isCancelled(){return 2===this.recordData.docstatus}},created(){console.log("***SubscriptionPlan.created: ",this.recordData),this.recordId=this.$route.params.recordId,this.fetchRecordData()},methods:{fetchRecordData(){console.log("***SubscriptionPlan.methods.fetchRecordData"),n.Z.get(`/api/formAPI.php?table=${this.tableName}&recordId=${this.recordId}`).then((e=>{const t=e.data.rows?e.data.rows[0]:[];t&&(this.recordData=t,this.newRecord=!1,this.oldData={...this.recordData}),console.log(">>>this.recordData",this.recordData)})).catch((e=>{console.error("Error fetching record data: ",e)}))},fetchComments(){n.Z.get(`/api/formAPI.php?table=comments&recordId=${this.recordId}`).then((e=>{this.comments=e.data.rows,console.log("this.comments",this.recordData)})).catch((e=>{console.error("Error fetching comments: ",e)}))},saveRecord(){console.log("***SubscriptionPlan.methods.saveRecord: ",this.recordData),n.Z.post(`/api/formAPI.php?table=${this.tableName}&recordId=${this.recordId}`,this.recordData).then((()=>{this.fetchRecordData()})).catch((e=>{console.error("Error saving record: ",e)}))},submitRecord(){n.Z.post(`/api/submitRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.fetchRecordData()})).catch((e=>{console.error("Error submitting record: ",e)}))},cancelRecord(){n.Z.post(`/api/cancelRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.fetchRecordData()})).cancel((e=>{console.error("Error cancelling record: ",e)}))},deleteRecord(){n.Z.post(`/api/deleteRecord.php?table=${this.tableName}&recordId=${this.recordId}`).then((()=>{this.$router.push(`/desk/List/${this.tableName}`)})).catch((e=>{console.error("Error deleting record: ",e)}))},postComment(){const e={comment:this.commentInput,recordId:this.recordId,tableName:this.tableName};n.Z.post(`/api/formAPI.php?table=${this.tableName}`,e).then((()=>{this.commentInput="",this.fetchComments()})).catch((e=>{console.error("Error posting comment: ",e)}))}},provide(){return{postComment:this.postComment,comments:this.comments}},watch:{recordData(e){console.log("watch ===> recordData: ",e)}}};const Co=(0,g.Z)(Ro,[["render",Io]]);var So=Co;const $o=[{path:"/",redirect:"/login"},{path:"/login",name:"login",components:{default:de}},{path:"/register",name:"register",component:ye},{path:"/desk",name:"desk",components:{default:Se},children:[{path:"",component:$t},{path:"List/:tableName",name:"list",component:ft,props:!0},{path:"Edit/customers/:recordId",name:"customers",component:So,props:!0},{path:"Edit/subscription-plan/:recordId",name:"subscription-plan",component:Gt,props:!0}]},{path:"/logout",name:"logout",component:Pe},{path:"/:notFound(.*)",component:Dt}],Uo=(0,J.p7)({history:(0,J.PO)(),routes:$o,scrollBehavior(e,t,o){return o||{left:0,top:0}}});var No=Uo;function Po(e,t){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}const Lo={},Zo=(0,g.Z)(Lo,[["render",Po],["__scopeId","data-v-c1eadd2e"]]);var Eo=Zo;function xo(e,t,o,a,s,n){return(0,r.wg)(),(0,r.iD)("button",{class:(0,Le.C_)(o.mode)},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],2)}var Ao={name:"BaseButton",props:["mode"]};const Wo=(0,g.Z)(Ao,[["render",xo],["__scopeId","data-v-7677e53c"]]);var jo=Wo;const qo={open:""};function Oo(e,t,o,a,s,n){const i=(0,r.up)("base-button");return(0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[(0,r._)("div",{id:"dialog-bg",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),(0,r._)("dialog",qo,[(0,r._)("header",null,[(0,r.WI)(e.$slots,"header",{},(()=>[(0,r._)("h5",null,(0,Le.zw)(o.title),1)]),!0)]),(0,r._)("section",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r._)("menu",null,[(0,r.WI)(e.$slots,"actions",{},(()=>[(0,r.Wm)(i,{onClick:t[1]||(t[1]=t=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r.Uk)("Close")])),_:1})]),!0)])])])}var Vo={name:"BaseDialog",emits:["close"],props:{title:{type:String,required:!1}}};const zo=(0,g.Z)(Vo,[["render",Oo],["__scopeId","data-v-7303d06d"]]);var Mo=zo;const Bo=(0,a.ri)(G);Bo.component("base-card",Eo),Bo.component("base-button",jo),Bo.component("base-dialog",Mo),Bo.use(No),Bo.mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,r,s){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],r=e[d][1],s=e[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&s||n>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,n=a[0],i=a[1],l=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var d=l(o)}for(t&&t(a);c<n.length;c++)s=n[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},a=self["webpackChunkbilling"]=self["webpackChunkbilling"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(3262)}));a=o.O(a)})();
//# sourceMappingURL=app.6cf89a5e.js.map